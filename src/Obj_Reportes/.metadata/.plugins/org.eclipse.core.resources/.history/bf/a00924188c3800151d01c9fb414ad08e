<?xml version="1.0" encoding="UTF-8"?>
<!-- Created with Jaspersoft Studio version 6.0.3.final using JasperReports Library version 6.0.3  -->
<!-- 2015-08-01T09:47:45 -->
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="Reporte_General_de_Asistencia_Por_Establecimiento" language="groovy" pageWidth="612" pageHeight="792" columnWidth="572" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="24cc16d5-c483-4414-a6b0-717ab373dbf7">
	<property name="com.jaspersoft.studio.data.defaultdataadapter" value="SCOI"/>
	<property name="ireport.zoom" value="4.59497298635725"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="505"/>
	<style name="Title" forecolor="#FFFFFF" fontName="Times New Roman" fontSize="50" isBold="false" pdfFontName="Times-Bold"/>
	<style name="SubTitle" forecolor="#CCCCCC" fontName="Times New Roman" fontSize="18" isBold="false" pdfFontName="Times-Roman"/>
	<style name="Column header" forecolor="#666666" fontName="Times New Roman" fontSize="14" isBold="true" pdfFontName="Times-Roman"/>
	<style name="Detail" mode="Transparent" fontName="Times New Roman" pdfFontName="Times-Roman"/>
	<style name="Row" mode="Transparent" fontName="Times New Roman" pdfFontName="Times-Roman">
		<conditionalStyle>
			<conditionExpression><![CDATA[$V{REPORT_COUNT}%2 == 0]]></conditionExpression>
			<style mode="Opaque" backcolor="#F0EFEF"/>
		</conditionalStyle>
	</style>
	<queryString language="SQL">
		<![CDATA[declare @fechaIn datetime, @fechaFin datetime

set @fechaIn  = '01/06/2015 00:00:00';
set @fechaFin = '26/07/2015 23:59:00';

	select 'abono' as folio_corte
			,convert(varchar(10),t_abn.folio_empleado)+'  '+t_emp.nombre+' '+t_emp.ap_paterno+' '+t_emp.ap_materno as empleado
			,t_abn.abono as cantidad
			,t_abn.lista_de_raya_del_abono as numero_de_liste_de_raya
			,t_abn.a_favor
			,convert(varchar(20),t_abn.fecha_de_modificacion,103)+' '+convert(varchar(20),t_abn.fecha_de_modificacion,108) as fecha_de_modificacion
			--,tb_abonos.status
			--,tb_abonos.status_cobro
	from tb_abonos t_abn
	inner join tb_empleado t_emp on t_emp.folio = t_abn.folio_empleado
	where t_abn.fecha_de_modificacion>=@fechaIn 
	and t_abn.fecha_de_modificacion<=@fechaFin 
	and t_abn.transaccion=6
	and t_abn.status = 2 --cobrados (status 1 seria por cobrar)
	--and folio_empleado = 1428

	union all(
				select al_cort.folio_corte as folio_corte
						,convert(varchar(10),al_cort.folio_empleado)+'  '+t_emp.nombre+' '+t_emp.ap_paterno+' '+t_emp.ap_materno as empleado
						,case  when (al_cort.status_de_cobro_seguridad = 2 and al_cort.diferencia_seguridad_sugerido <> 0) then al_cort.diferencia_seguridad_sugerido
								when (al_cort.status_de_cobro_seguridad = 2 and al_cort.diferencia_seguridad_sugerido = 0 and al_cort.diferencia_auditoria <> 0) then al_cort.diferencia_auditoria
								when (al_cort.status_de_cobro_auditoria = 2 and al_cort.diferencia_auditoria <> 0) then al_cort.diferencia_auditoria
								else al_cort.diferiencia_de_corte
							end as cantidad
						,al_cort.folio_lista_de_raya_cobro as numero_de_liste_de_raya
						,0 as a_favor
						,convert(varchar(20),al_cort.fecha_autorizacion_de_revision_de_corte,103)+' '+convert(varchar(20),al_cort.fecha_autorizacion_de_revision_de_corte,108) as fecha_de_modificacion
						--,'' as status
						--,'' as status_cobro
				from tb_alimentacion_de_cortes al_cort
				inner join tb_empleado t_emp on t_emp.folio = al_cort.folio_empleado
				where al_cort.status_autorizacion_corte = 1
				and al_cort.fecha_autorizacion_de_revision_de_corte>=@fechaIn 
				and al_cort.fecha_autorizacion_de_revision_de_corte<=@fechaFin 
				--and folio_empleado = 1428
				)				
	order by empleado, folio_corte, lista_de_raya_del_abono, fecha_de_modificacion]]>
	</queryString>
	<field name="folio_corte" class="java.lang.String"/>
	<field name="empleado" class="java.lang.String"/>
	<field name="cantidad" class="java.lang.Float"/>
	<field name="numero_de_liste_de_raya" class="java.lang.Integer"/>
	<field name="a_favor" class="java.math.BigDecimal"/>
	<field name="fecha_de_modificacion" class="java.lang.String"/>
	<group name="Group1" keepTogether="true">
		<groupExpression><![CDATA[$F{nombre}]]></groupExpression>
		<groupFooter>
			<band/>
		</groupFooter>
	</group>
	<background>
		<band height="752" splitType="Stretch"/>
	</background>
	<title>
		<band height="44" splitType="Stretch">
			<frame>
				<reportElement mode="Opaque" x="0" y="0" width="572" height="40" forecolor="#000080" backcolor="#000080" uuid="e240bfbe-93bc-4f07-b945-777193d9b1cb"/>
				<staticText>
					<reportElement style="Title" x="0" y="0" width="401" height="40" uuid="72d156aa-3e58-47f8-be35-76cead36680a"/>
					<textElement textAlignment="Center">
						<font fontName="Arial Black" size="16" isBold="false"/>
					</textElement>
					<text><![CDATA[*Reporte De Abonos Y Diferiencias De Cortes]]></text>
				</staticText>
				<image scaleImage="FillFrame">
					<reportElement x="528" y="0" width="44" height="40" uuid="cc4133a0-0b5a-4e0b-9abf-ed3c2c4adeee"/>
					<imageExpression><![CDATA["C:\\SCOI\\imagen\\icoreport.jpg"]]></imageExpression>
				</image>
				<staticText>
					<reportElement x="403" y="1" width="42" height="20" forecolor="#FFFFFF" uuid="a5dc0280-a528-4f29-911e-60255b2f42a1"/>
					<textElement>
						<font fontName="Times New Roman" size="14" isBold="true"/>
					</textElement>
					<text><![CDATA[DEL:]]></text>
				</staticText>
				<staticText>
					<reportElement x="403" y="20" width="42" height="20" forecolor="#FFFFFF" uuid="ea445ba0-5ba0-4439-b836-4f16a04f5acf"/>
					<textElement>
						<font fontName="Times New Roman" size="14" isBold="true"/>
					</textElement>
					<text><![CDATA[AL:]]></text>
				</staticText>
			</frame>
		</band>
	</title>
	<pageHeader>
		<band splitType="Stretch"/>
	</pageHeader>
	<detail>
		<band height="29" splitType="Stretch">
			<frame>
				<reportElement style="Row" isPrintRepeatedValues="false" mode="Opaque" x="2" y="1" width="570" height="14" isRemoveLineWhenBlank="true" forecolor="#FFFFFF" backcolor="#CCFF99" uuid="2a48881a-2e34-4fb8-8a5d-512aa8e4e3a9">
					<printWhenExpression><![CDATA[($F{dia}.equals('Martes')) || ($F{dia}.equals('Sábado'))]]></printWhenExpression>
				</reportElement>
			</frame>
			<frame>
				<reportElement style="Row" isPrintRepeatedValues="false" mode="Opaque" x="2" y="15" width="570" height="14" isRemoveLineWhenBlank="true" forecolor="#FFFFFF" backcolor="#FFFFFF" uuid="22f08280-7f56-4768-b85f-0dd547882c3d">
					<printWhenExpression><![CDATA[($F{dia}.equals('Miércoles')) || ($F{dia}.equals('Domingo'))]]></printWhenExpression>
				</reportElement>
			</frame>
		</band>
	</detail>
	<pageFooter>
		<band height="16" splitType="Stretch">
			<frame>
				<reportElement mode="Opaque" x="0" y="1" width="572" height="12" forecolor="#000080" backcolor="#000080" uuid="3779e6f8-81f6-4e28-b25e-c27f5724c713"/>
				<textField evaluationTime="Report">
					<reportElement style="Column header" x="509" y="0" width="40" height="11" forecolor="#FFFFFF" uuid="0ab7e32f-5093-48e8-9280-55e1963fb350"/>
					<textElement verticalAlignment="Middle">
						<font size="9" isBold="false"/>
					</textElement>
					<textFieldExpression><![CDATA[" " + $V{PAGE_NUMBER}]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement style="Column header" x="450" y="0" width="59" height="11" forecolor="#FFFFFF" uuid="27854e05-12e3-4e25-87d2-78f26b2ca50e"/>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font size="9" isBold="false"/>
					</textElement>
					<textFieldExpression><![CDATA["Pagina"+$V{PAGE_NUMBER}+" de"]]></textFieldExpression>
				</textField>
				<textField pattern="EEEEE dd MMMMM yyyy">
					<reportElement style="Column header" x="79" y="1" width="138" height="11" forecolor="#FFFFFF" uuid="2b5b27fe-5005-4724-9d76-f4ce3ac95546"/>
					<textElement verticalAlignment="Middle">
						<font size="9" isBold="false"/>
					</textElement>
					<textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement mode="Transparent" x="1" y="1" width="78" height="11" forecolor="#FFFFFF" backcolor="#FFFFFF" uuid="bff43a98-cee1-472d-9e1b-8755c292955c"/>
					<textElement textAlignment="Left" verticalAlignment="Middle" rotation="None" markup="none">
						<font fontName="Times New Roman" size="9" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
						<paragraph lineSpacing="Single"/>
					</textElement>
					<text><![CDATA[Fecha de Impresion:]]></text>
				</staticText>
			</frame>
		</band>
	</pageFooter>
</jasperReport>
